EXECUTABLE = iemcd

CC      = gcc
CFLAGS  = -Wall -lmysqlclient -l'hidapi-hidraw' -g -fpic
C_SRCS	= $(EXECUTABLE).c

# INCLUDES ?= -I./hidapi `pkg-config libusb-1.0 --cflags`

all: $(EXECUTABLE)


$(EXECUTABLE):
	$(CC) $(CFLAGS) $(C_SRCS) -o $(EXECUTABLE)

install:
	install $(EXECUTABLE) /usr/bin/$(EXECUTABLE)
	install $(EXECUTABLE).service /usr/lib/systemd/system/$(EXECUTABLE).service
	install $(EXECUTABLE).conf /etc/$(EXECUTABLE).conf
	systemctl daemon-reload
	systemctl restart $(EXECUTABLE).service

clean:
	rm -f $(OBJS) hidtest-hidraw libhidapi-hidraw.so iemcd.o

.PHONY: clean libs


	gcc iemcd.c -lmysqlclient -l'hidapi-hidraw'  -o iemcd.new